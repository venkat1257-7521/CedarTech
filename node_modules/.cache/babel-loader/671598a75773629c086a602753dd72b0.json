{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar filterList_1 = __importDefault(require(\"./filterList\"));\n\nvar getObjectDeepKeyValue_1 = __importDefault(require(\"./getObjectDeepKeyValue\"));\n\nvar isType_1 = require(\"./isType\");\n\nvar defaultSearchOptions = {\n  by: '0',\n  caseInsensitive: false,\n  everyWord: false,\n  minCharactersCount: 3,\n  term: ''\n};\n\nvar defaultFilterByFn = function defaultFilterByFn(item, term, caseInsensitive, by) {\n  if (caseInsensitive === void 0) {\n    caseInsensitive = false;\n  }\n\n  if (by === void 0) {\n    by = '0';\n  }\n\n  var keyValue = isType_1.isObject(item) || isType_1.isArray(item) ? getObjectDeepKeyValue_1.default(item, by) : item;\n  var value = caseInsensitive ? (\"\" + keyValue).toLowerCase() : \"\" + keyValue;\n\n  if (isType_1.isArray(term)) {\n    return term.some(function (t) {\n      t = caseInsensitive ? t.toLowerCase() : t.trim();\n      return value.search(t.trim()) >= 0;\n    });\n  }\n\n  term = caseInsensitive ? term.toLowerCase() : term;\n  return value.search(term.trim()) >= 0;\n};\n\nvar getFilterByFn = function getFilterByFn(term, by, caseInsensitive) {\n  if (caseInsensitive === void 0) {\n    caseInsensitive = false;\n  }\n\n  if (isType_1.isFunction(by)) {\n    if (isType_1.isArray(term)) {\n      return function (item, idx) {\n        return term.some(function (t) {\n          t = caseInsensitive ? t.toLowerCase() : t;\n          return by(item, t.trim(), idx);\n        });\n      };\n    }\n\n    term = caseInsensitive ? term.toLowerCase() : term;\n    return function (item, idx) {\n      return by(item, term.trim(), idx);\n    };\n  }\n\n  if (isType_1.isArray(by)) {\n    return function (item) {\n      return by.some(function (key) {\n        var keyCaseInsensitive = isType_1.isObject(key) && key.caseInsensitive !== undefined ? key.caseInsensitive : caseInsensitive;\n        var keyBy = (isType_1.isObject(key) ? key.key : key) || '0';\n        return defaultFilterByFn(item, term, keyCaseInsensitive, keyBy);\n      });\n    };\n  }\n\n  return function (item) {\n    return defaultFilterByFn(item, term, caseInsensitive, by || '0');\n  };\n};\n\nvar searchList = function searchList(list, options) {\n  if (isType_1.isNilOrEmpty(options)) {\n    options = defaultSearchOptions;\n  }\n\n  if (list.length > 0) {\n    var term = options.term,\n        _a = options.by,\n        by = _a === void 0 ? '0' : _a,\n        _b = options.minCharactersCount,\n        minCharactersCount_1 = _b === void 0 ? 0 : _b;\n\n    if (term && by && term.length >= minCharactersCount_1) {\n      var everyWord = options.everyWord,\n          caseInsensitive = options.caseInsensitive;\n\n      if (everyWord) {\n        var termWords = term.trim().split(/\\s+/).filter(function (word) {\n          return word.length >= minCharactersCount_1;\n        });\n\n        if (termWords.length > 0) {\n          var filterByFn = getFilterByFn(Array.from(new Set(termWords)), by, caseInsensitive);\n          return filterList_1.default(list, filterByFn);\n        }\n      } else {\n        var filterByFn = getFilterByFn(term, by, caseInsensitive);\n        return filterList_1.default(list, filterByFn);\n      }\n    }\n  }\n\n  return list;\n};\n\nexports.default = searchList;","map":{"version":3,"sources":["../../src/___utils/searchList.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar filterList_1 = __importDefault(require(\"./filterList\"));\nvar getObjectDeepKeyValue_1 = __importDefault(require(\"./getObjectDeepKeyValue\"));\nvar isType_1 = require(\"./isType\");\nvar defaultSearchOptions = {\n    by: '0',\n    caseInsensitive: false,\n    everyWord: false,\n    minCharactersCount: 3,\n    term: ''\n};\nvar defaultFilterByFn = function (item, term, caseInsensitive, by) {\n    if (caseInsensitive === void 0) { caseInsensitive = false; }\n    if (by === void 0) { by = '0'; }\n    var keyValue = (isType_1.isObject(item) || isType_1.isArray(item))\n        ? getObjectDeepKeyValue_1.default(item, by)\n        : item;\n    var value = caseInsensitive ? (\"\" + keyValue).toLowerCase() : \"\" + keyValue;\n    if (isType_1.isArray(term)) {\n        return term.some(function (t) {\n            t = caseInsensitive ? t.toLowerCase() : t.trim();\n            return value.search(t.trim()) >= 0;\n        });\n    }\n    term = caseInsensitive ? term.toLowerCase() : term;\n    return value.search(term.trim()) >= 0;\n};\nvar getFilterByFn = function (term, by, caseInsensitive) {\n    if (caseInsensitive === void 0) { caseInsensitive = false; }\n    if (isType_1.isFunction(by)) {\n        if (isType_1.isArray(term)) {\n            return function (item, idx) { return term.some(function (t) {\n                t = caseInsensitive ? t.toLowerCase() : t;\n                return by(item, t.trim(), idx);\n            }); };\n        }\n        term = caseInsensitive ? term.toLowerCase() : term;\n        return function (item, idx) { return by(item, term.trim(), idx); };\n    }\n    if (isType_1.isArray(by)) {\n        return function (item) { return by.some(function (key) {\n            var keyCaseInsensitive = isType_1.isObject(key) && key.caseInsensitive !== undefined\n                ? key.caseInsensitive : caseInsensitive;\n            var keyBy = (isType_1.isObject(key) ? key.key : key) || '0';\n            return defaultFilterByFn(item, term, keyCaseInsensitive, keyBy);\n        }); };\n    }\n    return function (item) { return defaultFilterByFn(item, term, caseInsensitive, by || '0'); };\n};\nvar searchList = function (list, options) {\n    if (isType_1.isNilOrEmpty(options)) {\n        options = defaultSearchOptions;\n    }\n    if (list.length > 0) {\n        var term = options.term, _a = options.by, by = _a === void 0 ? '0' : _a, _b = options.minCharactersCount, minCharactersCount_1 = _b === void 0 ? 0 : _b;\n        if (term && by && (term.length >= minCharactersCount_1)) {\n            var everyWord = options.everyWord, caseInsensitive = options.caseInsensitive;\n            if (everyWord) {\n                var termWords = term\n                    .trim()\n                    .split(/\\s+/)\n                    .filter(function (word) { return (word.length >= minCharactersCount_1); });\n                if (termWords.length > 0) {\n                    var filterByFn = getFilterByFn(Array.from(new Set(termWords)), by, caseInsensitive);\n                    return filterList_1.default(list, filterByFn);\n                }\n            }\n            else {\n                var filterByFn = getFilterByFn(term, by, caseInsensitive);\n                return filterList_1.default(list, filterByFn);\n            }\n        }\n    }\n    return list;\n};\nexports.default = searchList;\n//# sourceMappingURL=searchList.js.map"]},"metadata":{},"sourceType":"script"}